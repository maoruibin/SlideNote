# SlideNote v0.0.2 优化需求文档

> UI 交互优化
---

## 一、需求背景

v0.0.1 版本用户反馈：
1. 删除笔记时需要等待 3 秒倒计时，影响操作效率
2. 搜索框展开时，清空按钮（小叉号）右侧间距太紧

---

## 二、优化项清单

| 优先级 | 需求 | 类型 | 难度 |
|--------|------|------|------|
| P0 | 移除删除确认的 3 秒倒计时 | 交互优化 | 低 |
| P0 | 搜索框清空按钮增加右边距 | UI修复 | 低 |
| P0 | 新建笔记后聚焦到标题输入框 | 交互优化 | 低 |

---

## 三、详细设计

### 3.1 移除删除确认倒计时 (P0)

**问题描述**：
当前 `ConfirmDialog` 组件在显示删除确认弹窗时，确认按钮需要等待 3 秒倒计时才能点击。虽然设计初衷是防止误操作，但实际使用中影响效率，用户体验不佳。

**解决方案**：
移除倒计时逻辑，确认按钮立即可点击。保留确认弹窗作为二次确认机制。

**修改位置**：
- `src/sidepanel/components/ConfirmDialog.js`
  - 移除 `countdown` 和 `timer` 属性
  - 移除 `_startCountdown()` 方法
  - 确认按钮初始状态改为可点击

---

### 3.2 新建笔记后聚焦到标题输入框 (P0)

**问题描述**：
当前新建笔记后，自动创建"未命名笔记"，光标默认在内容编辑区。用户直接开始输入内容，导致产生大量"未命名笔记"，后续整理麻烦。

**解决方案**：
新建笔记后，自动聚焦到标题输入框，让用户直接输入标题。

**交互流程**：
```
点击 [+新建]
    ↓
创建新笔记（title: ""，默认显示占位符）
    ↓
自动聚焦到标题输入框
    ↓
显示 placeholder: "输入笔记标题..."
    ↓
用户可直接输入标题
    ↓
输入内容后开始写正文
```

**技术实现**：
- `NoteEditor.js` 中监听笔记选中事件
- 判断是否为新建笔记（title 为空或为默认占位符）
- 使用 `titleInput.focus()` 聚焦标题输入框
- 可选：使用 `titleInput.select()` 选中全部文本（如果有默认文本）

**修改位置**：
- `src/sidepanel/components/NoteEditor.js`
  - 在 `_onNoteSelected(note)` 方法中添加聚焦逻辑
  - 新建笔记时自动聚焦标题

**效果对比**：
```
优化前:
┌─────────────────────────────────┐
│ 标题: 未命名笔记                 │ ← 用户直接跳过，在下方写内容
├─────────────────────────────────┤
│ 这里是内容...                    │
│                                 │
└─────────────────────────────────┘

优化后:
┌─────────────────────────────────┐
│ 标题: [光标]输入笔记标题...      │ ← 自动聚焦，引导用户先写标题
├─────────────────────────────────┤
│                                 │
│                                 │
└─────────────────────────────────┘
```

**边界情况**：
| 场景 | 行为 |
|------|------|
| 用户不输入标题，直接按 Tab | 光标跳到内容区，标题保持为空 |
| 用户直接点击内容区 | 正常编辑内容，标题为空 |
| 用户输入标题后新建下一条 | 下一条新建时同样聚焦标题 |

---

### 3.3 搜索框清空按钮右边距 (P0)

**问题描述**：
搜索框展开状态下，清空按钮（×）与搜索框右边缘间距不足，视觉上过于紧凑。

**解决方案**：
给 `.search-close` 元素添加 `margin-right: 4px`。

**修改位置**：
- `src/sidepanel/styles.css`
  - `.search-bar-expanded .search-close` 添加 `margin-right: 4px`

**效果对比**：
```
修复前:
┌──────────────────────┐
│ 🔍 搜索内容...     × │ ← × 紧贴右边缘
└──────────────────────┘

修复后:
┌──────────────────────┐
│ 🔍 搜索内容...    ×  │ ← × 有呼吸空间
└──────────────────────┘
```

---

## 四、验收标准

### 删除倒计时移除
- [x] 点击删除后弹窗立即显示，确认按钮立即可点击
- [x] 确认按钮文本显示为"确认"，不带倒计时数字

### 新建笔记聚焦标题
- [ ] 点击新建后，光标自动聚焦到标题输入框
- [ ] 标题为空时显示 placeholder "输入笔记标题..."
- [ ] 用户可直接输入标题，无需手动点击
- [ ] 按 Tab 键可从标题跳到内容区

### 搜索框间距
- [x] 清空按钮与搜索框右边缘有 4px 间距
- [x] 视觉上更加舒适

---

## 五、完成状态

| 需求 | 状态 | 完成时间 |
|------|------|----------|
| 移除删除确认倒计时 | ✅ 完成 | 2026-01-12 |
| 新建笔记聚焦到标题 | 🚧 待开发 | - |
| 搜索框清空按钮右边距 | ✅ 完成 | 2026-01-12 |
